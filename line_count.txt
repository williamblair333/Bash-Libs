#!/usr/bin/env bash
string_rf='host bill_dm31_hyp_inf_01_rf'
string_cpe_rf='bill_dm31_hyp_inf_01_cpe_rf'
filename=/etc/dhcp/inc_sub_192.168.4x.0.conf

lines=$(wc -l "$filename" | awk '{print$ 1}') && lines=$(grep -A $lines "$string_rf" "$filename" | wc -l) && lines=$((lines-1)) && grep -A $lines "$string_rf" "$filename"

lines=$(wc -l "$filename" | awk '{print$ 1}') && lines=$(grep -A 17 "$string_rf" "$filename" | wc -l) && lines=$((lines-1)) && grep -A $lines "$string_rf" "$filename"
lines=$(wc -l "$filename" | awk '{print$ 1}') && lines=$(grep -A 17 "$string_cpe_rf" "$filename" | wc -l) && lines=$((lines-1)) && grep -A $lines "$string_cpe_rf" "$filename"


lines=$((lines-1))


sed -i "$(( $(sed -n "/bill_dm31_hyp_inf_01_rf/"= /etc/dhcp/inc_sub_192.168.4x.0.conf) + 2 ))s/#fixed-address/fixed-address/g" /etc/dhcp/inc_sub_192.168.4x.0.conf
sed -i "$(( $(sed -n "/$line_search/"= $file_input) $line_jump ))s/$string_find/$string_replace/$replace_scope" $file_input







######################################################################################################################################################################################################	

	Log to Console                ...
	#${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${DUT_DHCP}/"= ${FILE_DHCP}) + 2 )) s/#fixed-address/fixed-address/g" ${FILE_DHCP}
	#SSHLibrary.Execute Command    ${sed}    sudo=True  
	
	${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${DUT_DHCP}/"= ${FILE_DHCP}) + 2 )) s/#//g" ${FILE_DHCP}
	SSHLibrary.Execute Command    ${sed}    sudo=True 
	Log to Console                ${sed}
	Log to Console                ...

	${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${DUT_DHCP}/"= ${FILE_DHCP}) + 3 )) s/#//g" ${FILE_DHCP}
	SSHLibrary.Execute Command    ${sed}    sudo=True 	

	${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${DUT_DHCP}/"= ${FILE_DHCP}) + 3 )) s/fixed-address/#fixed-address/g" ${FILE_DHCP}
	SSHLibrary.Execute Command    ${sed}    sudo=True
	Log to Console                ${sed}
	Log to Console                ...
######################################################################################################################################################################################################	
	
	#${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${CPE_DHCP}/"= ${FILE_DHCP}) + 2 )) s/#fixed-address/fixed-address/g" ${FILE_DHCP}
	#SSHLibrary.Execute Command    ${sed}    sudo=True
	
	${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${CPE_DHCP}/"= ${FILE_DHCP}) + 2 )) s/#//g" ${FILE_DHCP}
	SSHLibrary.Execute Command    ${sed}    sudo=True
	
	${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${CPE_DHCP}/"= ${FILE_DHCP}) + 2 )) s/#//g" ${FILE_DHCP}
	SSHLibrary.Execute Command    ${sed}    sudo=True
	
	#${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${CPE_DHCP}/"= ${FILE_DHCP}) + 2 )) s/fixed-address/#fixed-address/g" ${FILE_DHCP}
	#SSHLibrary.Execute Command    ${sed}    sudo=True
	
	Log to Console                ${sed}
	Log to Console                ...
	
	${sed}=                       catenate  SEPARATOR=/  sed -i "$(( $(sed -n "/${CPE_DHCP}/"= ${FILE_DHCP}) + 3 )) s/fixed-address/#fixed-address/g" ${FILE_DHCP}
	SSHLibrary.Execute Command    ${sed}    sudo=True
	Log to Console                ${sed}
    Log to Console                ...
######################################################################################################################################################################################################	
